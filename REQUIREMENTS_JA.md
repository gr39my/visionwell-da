# アプリ要件定義書

## 1. 背景
本アプリは高校推薦枠マッチングシステムのフラグシップ版として開発する。教師は生徒の希望や評価情報を登録し、学校側は定員や評価基準を設定する。これらを基に、安定したマッチング結果を算出することを目的とする。

## 2. 目的
- 推薦枠に対する最適かつ公平なマッチングを提供する
- 先生、生徒、学校担当者それぞれの業務効率化
- データ分析による継続的な改善

## 3. 想定ユーザー
- 先生（推薦担当）
- 生徒
- 学校・企業の担当者
- システム管理者

## 4. 機能要件
### 4.1 認証・権限管理
- 先生、学校担当者、生徒、管理者の4ロールを定義
- メールアドレスとパスワードによるログイン
- 管理者は全データへのアクセス権を持つ

### 4.2 先生向け機能
- 生徒招待リンクの発行
- 生徒情報のCSVアップロードと編集
- 共有シート(Markdown)の閲覧・更新
- マッチング実行と結果確認
- 結果のCSV/PDFエクスポート

### 4.3 生徒向け機能
- 招待リンクからの新規登録
- 学年やクラス、評価情報の入力・更新
- 希望先の登録と並び替え
- マッチング結果の確認

### 4.4 学校担当者向け機能
- 募集要項の登録（定員、評価基準）
- 候補生徒の一覧・評価結果確認
- 採用確定処理

### 4.5 管理者向け機能
- ユーザー管理（先生・学校担当者のアカウント発行）
- システム設定（メールテンプレートや通知設定）
- 監査ログの閲覧

### 4.6 マッチングロジック
- DA(Deferred Acceptance)アルゴリズムをベースとする
- 学校側は評定・協調性など任意の評価項目を設定可能
- 結果は希望順とスコアに基づき決定し、安定マッチングを保証

### 4.7 通知機能
- マッチング完了時に先生・生徒・学校担当者へメール通知
- 期日リマインダー通知

### 4.8 データ分析
- 過去のマッチング結果を基にした統計情報の表示
- CSV出力およびBIツール連携を想定

## 5. 非機能要件
- **セキュリティ**: 通信はHTTPSで暗号化し、パスワードはハッシュ化して保存する
- **パフォーマンス**: 同時接続100ユーザーを想定。マッチング処理は1分以内に完了
- **可用性**: クラウド上で運用し、データベースは定期バックアップを行う
- **拡張性**: 評価基準やアルゴリズムを外部設定ファイルで追加できるようにする
- **保守性**: コードはモジュール化し、テストを整備

## 6. 画面イメージ(概要)
1. **ログイン画面**: ロール選択とメールアドレス/パスワード入力
2. **先生ダッシュボード**: 招待リンク管理、生徒一覧、CSVアップロード、マッチング実行ボタン
3. **生徒登録画面**: 個人情報、希望先入力、登録完了後の確認ページ
4. **学校担当者画面**: 募集要項入力、候補生徒の確認、承認操作
5. **管理者画面**: ユーザー管理、システム設定、監査ログ

## 7. 移行・運用
- 既存CSVデータを取り込むためのインポートツールを提供
- 運用開始前に権限設定やメールテンプレートを管理者が登録
- バージョン管理とCI/CDパイプラインを整備

## 8. スケジュール例
1. 要件定義: 2週間
2. 設計・実装: 6週間
3. テスト: 2週間
4. リリース準備: 1週間

## 9. 期待効果
- 先生の事務作業時間を大幅削減
- 学校側の採用ミスマッチ軽減
- 生徒へのフィードバックスピード向上

